{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Notification","message","className","ErrorMessage","errorMessage","Filter","value","onChange","PersonForm","name","number","onChangeName","onChangeNumber","onSubmit","type","Persons","personsToShow","deletePerson","map","person","onClick","App","useState","persons","setPersons","setMessage","setErrorMessage","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","filter","toLowerCase","includes","useEffect","personService","initialPersons","event","target","preventDefault","changedPerson","find","p","window","confirm","returnedPerson","setTimeout","catch","error","errMsg","console","log","concat","personObject","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"uMACMA,EAAU,eAsBD,EApBA,WAEb,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAACC,GAAD,OAAcA,EAASC,SAkB9B,EAfA,SAACC,GAEd,OADgBL,IAAMM,KAAKP,EAASM,GACrBH,MAAK,SAACC,GAAD,OAAcA,EAASC,SAa9B,EAVA,SAACG,EAAIF,GAElB,OADgBL,IAAMQ,IAAN,UAAaT,EAAb,YAAwBQ,GAAMF,GAC/BH,MAAK,SAACC,GAAD,OAAcA,EAASC,SAQ9B,EALH,SAACG,GAEX,OADgBP,IAAMS,OAAN,UAAgBV,EAAhB,YAA2BQ,IAC5BL,MAAK,SAACC,GAAD,OAAcA,EAASC,S,OChBvCM,EAAe,SAAC,GAAD,IAAGC,EAAH,EAAGA,QAAH,OACnBA,EAAU,qBAAKC,UAAU,eAAf,SAA+BD,IAAiB,MACtDE,EAAe,SAAC,GAAD,IAAGC,EAAH,EAAGA,aAAH,OACnBA,EAAe,qBAAKF,UAAU,QAAf,SAAwBE,IAAsB,MAEzDC,EAAS,SAAC,GAAD,IAAGC,EAAH,EAAGA,MAAOC,EAAV,EAAUA,SAAV,OACb,qDACoB,uBAAOD,MAAOA,EAAOC,SAAUA,QAI/CC,EAAa,SAAC,GAAD,IACjBC,EADiB,EACjBA,KACAC,EAFiB,EAEjBA,OACAC,EAHiB,EAGjBA,aACAC,EAJiB,EAIjBA,eACAC,EALiB,EAKjBA,SALiB,OAOjB,uBAAMA,SAAUA,EAAhB,UACE,yCACQ,uBAAOP,MAAOG,EAAMF,SAAUI,OAEtC,2CACU,uBAAOL,MAAOI,EAAQH,SAAUK,OAE1C,8BACE,wBAAQE,KAAK,SAAb,uBAKAC,EAAU,SAAC,GAAqC,IAAnCC,EAAkC,EAAlCA,cAAeC,EAAmB,EAAnBA,aAChC,OACE,8BACGD,EAAcE,KAAI,SAACC,GAAD,OACjB,gCACGA,EAAOV,KADV,IACiBU,EAAOT,OACtB,wBAAQU,QAAS,kBAAMH,EAAaE,IAApC,sBAFQA,EAAOtB,UAsJVwB,EA7IH,WAAO,IAAD,EACcC,mBAAS,IADvB,mBACTC,EADS,KACAC,EADA,OAEcF,qBAFd,mBAETrB,EAFS,KAEAwB,EAFA,OAGwBH,qBAHxB,mBAGTlB,EAHS,KAGKsB,EAHL,OAIcJ,mBAAS,IAJvB,mBAITK,EAJS,KAIAC,EAJA,OAKkBN,mBAAS,IAL3B,mBAKTO,EALS,KAKEC,EALF,OAMkBR,mBAAS,IAN3B,mBAMTS,EANS,KAMEC,EANF,KA2GVhB,EAAgBe,EAClBR,EAAQU,QAAO,SAACd,GAAD,OACbA,EAAOV,KAAKyB,cAAcC,SAASJ,EAAUG,kBAE/CX,EAUJ,OAFAa,qBANoB,WAClBC,IAAuB7C,MAAK,SAAC8C,GAC3Bd,EAAWc,QAIQ,IAGrB,gCACE,2CACA,cAAC,EAAD,CAAcrC,QAASA,IACvB,cAAC,EAAD,CAAcG,aAAcA,IAC5B,cAAC,EAAD,CAAQE,MAAOyB,EAAWxB,SAvBH,SAACgC,GAC1BP,EAAaO,EAAMC,OAAOlC,UAuBxB,2CACA,cAAC,EAAD,CACEG,KAAMkB,EACNhB,aAnCmB,SAAC4B,GACxBX,EAAWW,EAAMC,OAAOlC,QAmCpBI,OAAQmB,EACRjB,eAjCqB,SAAC2B,GAC1BT,EAAaS,EAAMC,OAAOlC,QAiCtBO,SA7HY,SAAC0B,GACjBA,EAAME,iBACN,IAAMC,EAAgBnB,EAAQoB,MAAK,SAACC,GAAD,OAAOA,EAAEnC,OAASkB,KACjDe,EAEAG,OAAOC,QAAP,UACKJ,EAAcjC,KADnB,8EAIAiC,EAAchC,OAASmB,EACvBQ,EACUK,EAAc7C,GAAI6C,GACzBlD,MAAK,SAACuD,GACLtB,EAAW,WAAD,OAAYiB,EAAcjC,KAA1B,MACVuC,YAAW,WACTvB,EAAW,QACV,KAEHD,EACED,EAAQL,KAAI,SAACC,GAAD,OACVA,EAAOtB,KAAOkD,EAAelD,GAAKsB,EAAS4B,MAG/CnB,EAAW,IACXE,EAAa,OAEdmB,OAAM,SAACC,GAEN,IAAMC,EAASD,EAAMzD,SAASC,KAC9B0D,QAAQC,IAAIF,GACZzB,EAAgByB,GAChBH,YAAW,WACTtB,EAAgB,QACf,SAQTW,EAJqB,CACnB5B,KAAMkB,EACNjB,OAAQmB,IAIPrC,MAAK,SAACuD,GACLtB,EAAW,SAAD,OAAUsB,EAAetC,KAAzB,MACVuC,YAAW,WACTvB,EAAW,QACV,KACHD,EAAWD,EAAQ+B,OAAOP,IAC1BnB,EAAW,IACXE,EAAa,OAEdmB,OAAM,SAACC,GACN,IAAMC,EAASD,EAAMzD,SAASC,KAAKwD,MACnCE,QAAQC,IAAIF,GACZzB,EAAgByB,GAChBH,YAAW,WACTtB,EAAgB,QACf,WAqEP,yCACA,cAAC,EAAD,CAASV,cAAeA,EAAeC,aAjEtB,SAACsC,GAChBV,OAAOC,QAAQ,UAAYS,EAAa9C,KAAO,MACjD4B,EACOkB,EAAa1D,IACjBL,MAAK,SAACuD,GACLtB,EAAW,WAAD,OAAY8B,EAAa9C,KAAzB,MACVuC,YAAW,WACTvB,EAAW,QACV,KAEHD,EAAWD,EAAQU,QAAO,SAACd,GAAD,OAAYA,EAAOtB,KAAO0D,EAAa1D,UAElEoD,OAAM,SAACC,GAEN,IAAMC,EAASD,EAAMzD,SAASC,KAC9B0D,QAAQC,IAAIF,GACZzB,EAAgByB,GAChBH,YAAW,WACTtB,EAAgB,QACf,eCtIb8B,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.344a1f80.chunk.js","sourcesContent":["import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject);\n  return request.then((response) => response.data);\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then((response) => response.data);\n};\n\nconst del = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response.data);\n};\n\nexport default { getAll, create, update, del };\n","import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport personService from \"./services/persons\";\n\nconst Notification = ({ message }) =>\n  message ? <div className=\"notification\">{message}</div> : null;\nconst ErrorMessage = ({ errorMessage }) =>\n  errorMessage ? <div className=\"error\">{errorMessage}</div> : null;\n\nconst Filter = ({ value, onChange }) => (\n  <div>\n    filter shown with <input value={value} onChange={onChange} />\n  </div>\n);\n\nconst PersonForm = ({\n  name,\n  number,\n  onChangeName,\n  onChangeNumber,\n  onSubmit,\n}) => (\n  <form onSubmit={onSubmit}>\n    <div>\n      name: <input value={name} onChange={onChangeName} />\n    </div>\n    <div>\n      number: <input value={number} onChange={onChangeNumber} />\n    </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n);\n\nconst Persons = ({ personsToShow, deletePerson }) => {\n  return (\n    <div>\n      {personsToShow.map((person) => (\n        <div key={person.id}>\n          {person.name} {person.number}\n          <button onClick={() => deletePerson(person)}>Delete</button>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [message, setMessage] = useState();\n  const [errorMessage, setErrorMessage] = useState();\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [newFilter, setNewFilter] = useState(\"\");\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    const changedPerson = persons.find((p) => p.name === newName);\n    if (changedPerson) {\n      if (\n        window.confirm(\n          `${changedPerson.name} is already added to phonebook, replace the old number with a new one? `\n        )\n      ) {\n        changedPerson.number = newNumber;\n        personService\n          .update(changedPerson.id, changedPerson)\n          .then((returnedPerson) => {\n            setMessage(`Updated ${changedPerson.name}.`);\n            setTimeout(() => {\n              setMessage(null);\n            }, 5000);\n\n            setPersons(\n              persons.map((person) =>\n                person.id !== returnedPerson.id ? person : returnedPerson\n              )\n            );\n            setNewName(\"\");\n            setNewNumber(\"\");\n          })\n          .catch((error) => {\n            // const errMsg = `Information of ${changedPerson.name} has been removed from server`;\n            const errMsg = error.response.data;\n            console.log(errMsg);\n            setErrorMessage(errMsg);\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 5000);\n          });\n      }\n    } else {\n      const personObject = {\n        name: newName,\n        number: newNumber,\n      };\n      personService\n        .create(personObject)\n        .then((returnedPerson) => {\n          setMessage(`Added ${returnedPerson.name}.`);\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n          setPersons(persons.concat(returnedPerson));\n          setNewName(\"\");\n          setNewNumber(\"\");\n        })\n        .catch((error) => {\n          const errMsg = error.response.data.error;\n          console.log(errMsg);\n          setErrorMessage(errMsg);\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        });\n    }\n  };\n\n  const deletePerson = (personObject) => {\n    if (window.confirm(\"Delete \" + personObject.name + \"?\")) {\n      personService\n        .del(personObject.id)\n        .then((returnedPerson) => {\n          setMessage(`Deleted ${personObject.name}.`);\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n\n          setPersons(persons.filter((person) => person.id !== personObject.id));\n        })\n        .catch((error) => {\n//          const errMsg = `Error in deleting ${personObject.name}`;\n          const errMsg = error.response.data;\n          console.log(errMsg);\n          setErrorMessage(errMsg);\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        });\n    }\n  };\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilterChange = (event) => {\n    setNewFilter(event.target.value);\n  };\n\n  const personsToShow = newFilter\n    ? persons.filter((person) =>\n        person.name.toLowerCase().includes(newFilter.toLowerCase())\n      )\n    : persons;\n\n  const hookPersons = () => {\n    personService.getAll().then((initialPersons) => {\n      setPersons(initialPersons);\n    });\n  };\n\n  useEffect(hookPersons, []);\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <ErrorMessage errorMessage={errorMessage} />\n      <Filter value={newFilter} onChange={handleFilterChange} />\n      <h2>Add a new</h2>\n      <PersonForm\n        name={newName}\n        onChangeName={handleNameChange}\n        number={newNumber}\n        onChangeNumber={handleNumberChange}\n        onSubmit={addPerson}\n      />\n      <h2>Numbers</h2>\n      <Persons personsToShow={personsToShow} deletePerson={deletePerson} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}